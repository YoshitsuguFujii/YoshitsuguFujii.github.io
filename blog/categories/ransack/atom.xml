<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

    <title><![CDATA[Category: ransack | なんとなく日々徒然と]]></title>
    <link href="http://yoshitsugufujii.github.io/blog/categories/ransack/atom.xml" rel="self"/>
    <link href="http://yoshitsugufujii.github.io/"/>
    <updated>2016-05-02T15:10:51+09:00</updated>
    <id>http://yoshitsugufujii.github.io/</id>
    <author>
        <name><![CDATA[Yoshitsugu Fujii]]></name>
        
      </author>
    <generator uri="http://octopress.org/">Octopress</generator>

    
    <entry>
        <title type="html"><![CDATA[ransackを使ったpolymorphic関連のモデルの検索処理]]></title>
        <link href="http://yoshitsugufujii.github.io/blog/2013/06/20/20130620203034/"/>
        <updated>2013-06-20T20:30:00+09:00</updated>
        <id>http://yoshitsugufujii.github.io/blog/2013/06/20/20130620203034</id>
        <content type="html"><![CDATA[<p>polymorphic関連のモデルの検索処理をransack使って書いていて、どうやるんだ？<br/>
ってなった。答えはここにあった。<br/>
<a href="http://stackoverflow.com/questions/13077954/does-ransack-support-the-same-polymorhpic-belongs-to-associations-in-its-searche">http://stackoverflow.com/questions/13077954/does-ransack-support-the-same-polymorhpic-belongs-to-associations-in-its-searche</a></p>

<p>polymorphicに関してのわかりやすい説明はこちらのサイトで。</p>

<p><a href="http://shirusu-ni-tarazu.hatenablog.jp/entry/2012/11/04/173742">http://shirusu-ni-tarazu.hatenablog.jp/entry/2012/11/04/173742</a></p>

<p>説明にもここの情報を使わせていただきます。</p>

<pre><code class="ruby">class Image &lt; ActiveRecord::Base
  belongs_to :imageable, :polymorphic =&gt; true
end

class Company &lt; ActiveRecord::Base
  has_many :images, :as =&gt; :imageable
end

class User &lt; ActiveRecord::Base
  has_many :images, :as =&gt; :imageable
end
</code></pre>

<p>  #Imageからみた検索<br/>
  # companyの名前のlike検索<br/>
f.text  <em>field :imageable  </em>of  <em>Company  </em>type  <em>name  </em>cont</p>

<p>  #Imageからみた検索<br/>
  # userの名前のlike検索<br/>
f.text  <em>field :imageable  </em>of  <em>User  </em>type  <em>name  </em>cont</p>

<p>polymorphic名 of 検索したいクラス名 + type + 検索対象列 + 条件<br/>
で検索できるみたい。</p>
]]></content>
    </entry>
    
</feed>
