<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

    <title><![CDATA[なんとなく日々徒然と]]></title>
    <link href="http://yoshitsugufujii.github.io/atom.xml" rel="self"/>
    <link href="http://yoshitsugufujii.github.io/"/>
    <updated>2018-01-29T15:09:17+09:00</updated>
    <id>http://yoshitsugufujii.github.io/</id>
    <author>
        <name><![CDATA[Yoshitsugu Fujii]]></name>
        
    </author>
    <generator uri="http://octopress.org/">Octopress</generator>

    
    <entry>
        <title type="html"><![CDATA[Doorkeeperでパスワードが変更されたらクライアント側でログアウトさせる]]></title>
        <link href="http://yoshitsugufujii.github.io/blog/2018/01/29/logout-when-doorkeeper-password-change/"/>
        <updated>2018-01-29T14:26:19+09:00</updated>
        <id>http://yoshitsugufujii.github.io/blog/2018/01/29/logout-when-doorkeeper-password-change</id>
        <content type="html"><![CDATA[<p><a href="https://github.com/doorkeeper-gem/doorkeeper">Doorkeeper</a>を使ったoauthの仕組みでプラットフォーム側でパスワード変更の処理を書いててパスワード変更しても現在ログイン状態のユーザーがログアウトされなくて久しぶりにどっぷりハマったのでメモ。</p>

<!-- more -->


<p></p>

<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<p>  <br/>
<ins class="adsbygoogle"  
     style="display:block; text-align:center;"  
     data-ad-layout="in-article"  
     data-ad-format="fluid"  
     data-ad-client="ca-pub-7039502723411845"  
     data-ad-slot="8206045005"></ins></p>

<script>    
     (adsbygoogle = window.adsbygoogle || []).push({});    
</script>


<p></p>

<p>セッションストアであるredisを見ると同じユーザーで二つのブラウザでログインすると２つ違うsession keyで保持されている。<br/>
このセッションの中身は</p>

<p>一つ目はwarden key(そのままだとユーザID)<br/>
二つ目はencrypted_password</p>

<p>となっているようだ。</p>

<p><a href="https://stackoverflow.com/a/23683925/2223472">https://stackoverflow.com/a/23683925/2223472</a></p>

<p>Doorkeeperを使っているクライアントではoauth認証を使うのでパスワードを使っていない<br/>
そのため二つめencrypted_passwordの値は空になっている。</p>

<p>この二つの値を使って認証しているようだ。</p>

<p>プラットフォーム側でパスワードを変更しても二つ目の値は相変わらず空のためクライアント側ではセッションの状況に変化なしとなり<br/>
そのままログインが保持されてしまう。</p>

<p>tokenを使ったりパスワードを渡す等があったりしたがこうした。</p>

<p>まず、 パスワード変更時刻をプラットフォーム側にcolumnとして追加。<br/>
パスワード変更時にupdateするようにする。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>class User &lt; ApplicationRecord  
</span><span class='line'>  def reset_password(*args)  
</span><span class='line'>    self.password_changed_at = Time.current  
</span><span class='line'>    super  
</span><span class='line'>  end  
</span><span class='line'>end  </span></code></pre></td></tr></table></div></figure>


<p></p>

<p>そしてクライアントサイドでは連携されたpassword_changed_atを使うようにする。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>class User &lt; ApplicationRecord  
</span><span class='line'>  def authenticatable_salt  
</span><span class='line'>    password_changed_at  
</span><span class='line'>  end  
</span><span class='line'>end  </span></code></pre></td></tr></table></div></figure>


<p></p>

<p>これでパスワードが変更されるとクライアントのセッションの中身も変わり、<br/>
他のブラウザでログインしていても適切にログアウトされる。</p>
]]></content>
    </entry>
    
    <entry>
        <title type="html"><![CDATA[CircleCIでRuby2.5使おうとしたらbad interpreter]]></title>
        <link href="http://yoshitsugufujii.github.io/blog/2018/01/26/circle-ci-ver-one-ruby-two-five-bad-interpreter/"/>
        <updated>2018-01-26T18:51:07+09:00</updated>
        <id>http://yoshitsugufujii.github.io/blog/2018/01/26/circle-ci-ver-one-ruby-two-five-bad-interpreter</id>
        <content type="html"><![CDATA[<p>一度は成功していたのに急にCircleCI 1.0がこけるようになってしまいました。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>set ruby version to 2.5.0  </span></code></pre></td></tr></table></div></figure>


<p></p>

<p>で</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>ruby-2.5.0 - #generating default wrappers|/-\|/-\|.-\|/-\|/-.|/-\|/-\|.-\|/-\|/-.|/-\|/-\|.-\|/-\|/-.|/-\|/-\|.-\|/-\|.  
</span><span class='line'>Using /home/ubuntu/.rvm/gems/ruby-2.5.0  
</span><span class='line'>/home/ubuntu/.rvm/scripts/override_gem: /home/ubuntu/.rvm/rubies/ruby-2.5.0/bin/gem: /home/travis/.rvm/rubies/ruby-2.5.0/bin/ruby: bad interpreter: No such file or directory  </span></code></pre></td></tr></table></div></figure>


<p></p>

<p>のようなエラー。</p>

<!-- more -->


<p></p>

<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<p>  <br/>
<ins class="adsbygoogle"  
     style="display:block; text-align:center;"  
     data-ad-layout="in-article"  
     data-ad-format="fluid"  
     data-ad-client="ca-pub-7039502723411845"  
     data-ad-slot="8206045005"></ins></p>

<script>    
     (adsbygoogle = window.adsbygoogle || []).push({});    
</script>


<p></p>

<p>調べるとこんなツイートが&hellip;</p>

<blockquote class="twitter-tweet" data-lang="ja"><p lang="en" dir="ltr"><a href="https://twitter.com/circleci?ref_src=twsrc%5Etfw">@circleci</a> I&#39;m getting build failures on ruby 2.5 - it looks like the `gem` command is using a shebang that references a non-existent `/home/travis` directory <a href="https://t.co/UcZREdK2Q8">pic.twitter.com/UcZREdK2Q8</a></p>&mdash; Justin Rhinesmith (@jerhinesmith) <a href="https://twitter.com/jerhinesmith/status/956311677426741248?ref_src=twsrc%5Etfw">2018年1月24日</a></blockquote>


<p></p>

<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>


<p></p>

<p>sshするとshebangでエラーになっている同じ現象でした。<br/>
そしてこんなチケットが&hellip;</p>

<p><a href="https://discuss.circleci.com/t/ruby-2-5-0-builds-failing-on-circleci-1-0-due-to-missing-home-travis/19620">Ruby 2.5.0 builds failing on CircleCI 1.0 due to missing <code>/home/travis</code></a></p>

<p>解決しているらしいのですが、普通にエラーでますがな&hellip;<br/>
マニュアルで</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>machine:  
</span><span class='line'>  pre:  
</span><span class='line'>    - sudo ln -s /opt/circleci /home/travis  </span></code></pre></td></tr></table></div></figure>


<p></p>

<p>を仕込もうとしたらもうありますエラー。<br/>
そして微妙にパスも違う。</p>

<p>結論。こうしてなおしました。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>machine:  
</span><span class='line'>  pre:  
</span><span class='line'>    - sudo rm -rf /home/travis  
</span><span class='line'>    - sudo ln -s /home/ubuntu /home/travis  
</span><span class='line'>  ruby:  
</span><span class='line'>    version: 2.5.0  </span></code></pre></td></tr></table></div></figure>


<p></p>

<p>すぐなおってくれると思いますが、お困りの人がいたら上記で治ります。</p>
]]></content>
    </entry>
    
    <entry>
        <title type="html"><![CDATA[ridgepoleの部分インデックスで毎回createとdrop indexをさせない書き方]]></title>
        <link href="http://yoshitsugufujii.github.io/blog/2018/01/22/ridgepole-partial-uniq-index/"/>
        <updated>2018-01-22T14:44:35+09:00</updated>
        <id>http://yoshitsugufujii.github.io/blog/2018/01/22/ridgepole-partial-uniq-index</id>
        <content type="html"><![CDATA[<p>railsでparanoiaとか使っていて、<br/>
mysqlで論理削除にdeleted_atがnullかどうかで論理削除判定していると<br/>
dbのuniq indexで辛い感じになります。</p>

<p>postgresqlでは部分インデックスなるものがあり、deleted_atがnullのものをuniq制約の条件に含めないとかいうことができます。</p>

<p><a href="https://www.postgresql.jp/document/9.2/html/indexes-partial.html">部分インデックス</a></p>

<!-- more -->


<p></p>

<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<p>  <br/>
<ins class="adsbygoogle"  
     style="display:block; text-align:center;"  
     data-ad-layout="in-article"  
     data-ad-format="fluid"  
     data-ad-client="ca-pub-7039502723411845"  
     data-ad-slot="8206045005"></ins></p>

<script>    
     (adsbygoogle = window.adsbygoogle || []).push({});    
</script>


<p></p>

<p>ridgepoleではこう書くと毎回create index drop indexしません。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>add_index "users", ["email"], name: "uniq_email_idx", unique: true, where: '(deleted_at IS NULL)'  </span></code></pre></td></tr></table></div></figure>


<p></p>

<p>本日は大雪らしいので早く帰りましょう。</p>
]]></content>
    </entry>
    
    <entry>
        <title type="html"><![CDATA[テーブルで手軽に炙りを体験]]></title>
        <link href="http://yoshitsugufujii.github.io/blog/2017/12/26/soto-toach/"/>
        <updated>2017-12-26T10:15:14+09:00</updated>
        <id>http://yoshitsugufujii.github.io/blog/2017/12/26/soto-toach</id>
        <content type="html"><![CDATA[<p>みなさんはま寿司とか行きますか？<br/>
回る寿司屋ではあぶり系のネタが一番充実しているような気がします。</p>

<p>あぶりしめ鯖おいしいですね。</p>

<!-- more -->


<p></p>

<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<p>  <br/>
<ins class="adsbygoogle"  
     style="display:block; text-align:center;"  
     data-ad-layout="in-article"  
     data-ad-format="fluid"  
     data-ad-client="ca-pub-7039502723411845"  
     data-ad-slot="8206045005"></ins></p>

<script>    
     (adsbygoogle = window.adsbygoogle || []).push({});    
</script>


<p></p>

<p>我が家であぶりたい時にはこれを使っています。</p>

<table  border="0" cellpadding="5" style="border:none"><tr><td valign="top" style="border:none"><a href="https://hb.afl.rakuten.co.jp/hgc/g00r3jp6.4dryw726.g00r3jp6.4dryxab7/?pc=https%3A%2F%2Fitem.rakuten.co.jp%2Fhimaraya%2F0000000322484%2F&m=http%3A%2F%2Fm.rakuten.co.jp%2Fhimaraya%2Fi%2F10087427%2F" target="_blank" ><img src="https://thumbnail.image.rakuten.co.jp/@0_mall/himaraya/cabinet/tentou3bai_1/0000000322484_r1_01.jpg?_ex=128x128" border="0" style="margin-right:10px" /></a></td><td valign="top" style="border:none;text-align:left"><div class="kaerebalink-name" style="margin-bottom:10px;line-height:120%"><a href="https://hb.afl.rakuten.co.jp/hgc/g00r3jp6.4dryw726.g00r3jp6.4dryxab7/?pc=https%3A%2F%2Fitem.rakuten.co.jp%2Fhimaraya%2F0000000322484%2F&m=http%3A%2F%2Fm.rakuten.co.jp%2Fhimaraya%2Fi%2F10087427%2F" target="_blank" >ソト SOTO トーチ　チャッカ— ポケットサイズ バーナー ST-480</a></div><div class="kaerebalink-detail" style="margin-bottom:5px;"></div><table style="border:none;margin-top:10px"><tr><td style="border:none;text-align:left;"><div class="shoplinkrakuten" style="margin-right:5px"><a href="https://hb.afl.rakuten.co.jp/hgc/16102ad8.0804351d.16102ad9.09702e1c/?pc=http%3A%2F%2Fsearch.rakuten.co.jp%2Fsearch%2Fmall%2FSOTO%2520%25E3%2583%259D%25E3%2582%25B1%25E3%2583%2583%25E3%2583%2588%25E3%2583%2588%25E3%2583%25BC%25E3%2583%2581%2F-%2Ff.1-p.1-s.1-sf.0-st.A-v.2%3Fx%3D0%26scid%3Daf_ich_link_urltxt%26m%3Dhttp%3A%2F%2Fm.rakuten.co.jp%2F" target="_blank" >楽天市場</a></div><div class="shoplinkamazon" style="margin-right:5px"><a href="http://www.amazon.co.jp/gp/search?keywords=SOTO%20%E3%83%9D%E3%82%B1%E3%83%83%E3%83%88%E3%83%88%E3%83%BC%E3%83%81&__mk_ja_JP=%E3%82%AB%E3%82%BF%E3%82%AB%E3%83%8A&tag=gogosakura-22" target="_blank" >Amazon</a></div></td><td style="vertical-align:bottom;padding-left:10px;font-size:x-small;border:none">by <a href="http://kaereba.com" rel="nofollow" target="_blank">カエレバ</a></td></tr></table></font></td></tr></table>


<p></p>

<p>火力もそこそこで携帯性が良くて取り回しがいいです。<br/>
食卓においても邪魔にならない。</p>

<p>炙りしめ鯖<br/>
<a href="http://yoshitsugufujii.github.io/images/blog/20171226/IMG_3432.jpg" data-lightbox="aburi" data-title=""/><br/>
  <img src="http://yoshitsugufujii.github.io/images/blog/20171226/IMG_3432.jpg"><br/>
</a></p>

<p><a href="http://yoshitsugufujii.github.io/images/blog/20171226/IMG_3433.jpg" data-lightbox="aburi" data-title=""/><br/>
  <img src="http://yoshitsugufujii.github.io/images/blog/20171226/IMG_3433.jpg"><br/>
</a></p>

<p><a href="http://yoshitsugufujii.github.io/images/blog/20171226/IMG_3434.jpg" data-lightbox="aburi" data-title=""/><br/>
  <img src="http://yoshitsugufujii.github.io/images/blog/20171226/IMG_3434.jpg"><br/>
</a></p>

<p>炙りサーモンチーズ<br/>
<a href="http://yoshitsugufujii.github.io/images/blog/20171226/IMG_3437.jpg" data-lightbox="aburi" data-title=""/><br/>
  <img src="http://yoshitsugufujii.github.io/images/blog/20171226/IMG_3437.jpg"><br/>
</a></p>

<p>わさびの袋とかとっちらかっててすいません。<br/>
ほんと便利でテーブルで必要な時に必要な時にだけ炙れますし、<br/>
炙りたての暖かいうちに食べれます。</p>

<p>スルメとか炙ってもいいかもしれません。</p>

<p>本格的なガスバーナーに比べて火力がないのでお子様でも扱えると思います。</p>
]]></content>
    </entry>
    
    <entry>
        <title type="html"><![CDATA[HerokuのNewRelicでRoleがUserで何もできない]]></title>
        <link href="http://yoshitsugufujii.github.io/blog/2017/12/21/heroku-at-herokumanager-dot-com/"/>
        <updated>2017-12-21T13:55:13+09:00</updated>
        <id>http://yoshitsugufujii.github.io/blog/2017/12/21/heroku-at-herokumanager-dot-com</id>
        <content type="html"><![CDATA[<p>子供が生まれましたのでしばらく釣りはお休みです。<br/>
春ぐらいになったら行きたいなぁ。</p>

<p>妻が帝王切開で産んだので、12月は週１の無理のない時間での出社を混ぜつつ、フルリモートで働かせていただいております。<br/>
大変ありがたいことです。</p>

<p>育児と家事と仕事で目が回るようでテレビなんてほとんど見れません。<br/>
シングルで育てている人には頭があがりませんね。</p>

<!-- more -->


<p></p>

<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<p>  <br/>
<ins class="adsbygoogle"  
     style="display:block; text-align:center;"  
     data-ad-layout="in-article"  
     data-ad-format="fluid"  
     data-ad-client="ca-pub-7039502723411845"  
     data-ad-slot="8206045005"></ins></p>

<script>    
     (adsbygoogle = window.adsbygoogle || []).push({});    
</script>


<p></p>

<p>今の仕事ではHeroku上でアプリケーション動かしているんですが、AddonでNewRelic足したら<br/>
NewRelic上でAlertの設定や各種変更動作ができない。</p>

<p>Userの設定をみると</p>

<p>チーム名@herokumanager.com</p>

<p>という見慣れないOwner権限を持ったユーザとUserロールの自分のみ。<br/>
色々と調べて見ましたが、最初にAddonを入れた時に連携するのにユーザが必要で暫定的に上記のユーザが作られるっぽい。</p>

<p><a href="https://discuss.newrelic.com/t/authorization-for-heroku-users/52967">https://discuss.newrelic.com/t/authorization-for-heroku-users/52967</a><br/>
<a href="https://discuss.newrelic.com/t/heroku-user-authorization/53121">https://discuss.newrelic.com/t/heroku-user-authorization/53121</a></p>

<p>正しい方法はわかりませんがしばらく調べてもわからなかったので潔くチケットをオープンしてNewRelicのサポートに自分のユーザをAdminにしてくれと夕方お願いしたら夜にはAdminになりました。</p>

<p>何か詰まっている人がいればサポートに投げるといいです。<br/>
誰かの参考になれば。</p>
]]></content>
    </entry>
    
    <entry>
        <title type="html"><![CDATA[自転車用ロッドホルダー]]></title>
        <link href="http://yoshitsugufujii.github.io/blog/2017/12/07/cycle-lod-holder/"/>
        <updated>2017-12-07T09:40:05+09:00</updated>
        <id>http://yoshitsugufujii.github.io/blog/2017/12/07/cycle-lod-holder</id>
        <content type="html"><![CDATA[<p>自転車のチェーンが度々外れるようになってきてしまったので<br/>
これを機に電動アシスト付きの自転車の購入を検討しました。<br/>
どうせなら車をどこかに止めて、そこから釣り場まで自転車で行ったりできるように車に積載可能なサイズを探しました。</p>

<p>実際に購入して、ロッドケースにまとめて竿をいれて担いで自転車乗っていたんですが、<br/>
自転車漕ぐ時に邪魔だし車の横すり抜ける時にぶつけそうになるので何かいい持ち運び方ないかと探していましたらいいのがありました。</p>

<!-- more -->


<p></p>

<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<p>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-7039502723411845"
     data-ad-slot="8206045005"></ins></p>

<script>  
     (adsbygoogle = window.adsbygoogle || []).push({});  
</script>


<p></p>

<p>100均に売っている傘ホルダーです。</p>

<p><a href="http://yoshitsugufujii.github.io/images/blog/20171206/IMG_3184.jpg" data-lightbox="takasukaihinkouen" data-title=""/><br/>
  <img src="http://yoshitsugufujii.github.io/images/blog/20171206/IMG_3184.jpg"><br/>
</a></p>

<p>左右に取り付けるとこんな感じ。</p>

<p><a href="http://yoshitsugufujii.github.io/images/blog/20171206/IMG_3185.jpg" data-lightbox="takasukaihinkouen" data-title=""/><br/>
  <img src="http://yoshitsugufujii.github.io/images/blog/20171206/IMG_3185.jpg"><br/>
</a></p>

<p><a href="http://yoshitsugufujii.github.io/images/blog/20171206/IMG_3186.jpg" data-lightbox="takasukaihinkouen" data-title=""/><br/>
  <img src="http://yoshitsugufujii.github.io/images/blog/20171206/IMG_3186.jpg"><br/>
</a></p>

<p>移動がめちゃめちゃ楽になりました。<br/>
投げ竿などの竿ジリが長いものも上の留めるところにリールをひっかければ持ち運び可能です。</p>

<p>ちなみに自転車はこれを購入しました。<br/>
座席を少し前に出せばVoxyとかであれば詰めます。<br/>
ただサドルが硬くてずっと乗ってると股間が痛くなりますね。</p>

<table  border="0" cellpadding="5" style="border:none"><tr><td valign="top" style="border:none"><a href="https://hb.afl.rakuten.co.jp/hgc/g00pm4a6.4dryw6dc.g00pm4a6.4dryx09f/?pc=https%3A%2F%2Fitem.rakuten.co.jp%2Fnextr%2Fpanasonic-jconcept%2F&m=http%3A%2F%2Fm.rakuten.co.jp%2Fnextr%2Fi%2F10003997%2F" target="_blank" ><img src="https://thumbnail.image.rakuten.co.jp/@0_mall/nextr/cabinet/05240708/imgrc0069940876.jpg?_ex=128x128" border="0" style="margin-right:10px" /></a></td><td valign="top" style="border:none;text-align:left"><div class="kaerebalink-name" style="margin-bottom:10px;line-height:120%"><a href="https://hb.afl.rakuten.co.jp/hgc/g00pm4a6.4dryw6dc.g00pm4a6.4dryx09f/?pc=https%3A%2F%2Fitem.rakuten.co.jp%2Fnextr%2Fpanasonic-jconcept%2F&m=http%3A%2F%2Fm.rakuten.co.jp%2Fnextr%2Fi%2F10003997%2F" target="_blank" >パナソニック　Jコンセプト　2017モデル 【送料無料】【電動自転車　自転車　電動アシスト自転車 20インチ】</a></div><div class="kaerebalink-detail" style="margin-bottom:5px;"></div><table style="border:none;margin-top:10px"><tr><td style="border:none;text-align:left;"><div class="shoplinkrakuten" style="margin-right:5px"><a href="https://hb.afl.rakuten.co.jp/hgc/16102ad8.0804351d.16102ad9.09702e1c/?pc=http%3A%2F%2Fsearch.rakuten.co.jp%2Fsearch%2Fmall%2FJ%25E3%2582%25B3%25E3%2583%25B3%25E3%2582%25BB%25E3%2583%2597%25E3%2583%2588%2F-%2Ff.1-p.1-s.1-sf.0-st.A-v.2%3Fx%3D0%26scid%3Daf_ich_link_urltxt%26m%3Dhttp%3A%2F%2Fm.rakuten.co.jp%2F" target="_blank" >楽天市場</a></div><div class="shoplinkamazon" style="margin-right:5px"><a href="http://www.amazon.co.jp/gp/search?keywords=J%E3%82%B3%E3%83%B3%E3%82%BB%E3%83%97%E3%83%88&__mk_ja_JP=%E3%82%AB%E3%82%BF%E3%82%AB%E3%83%8A&tag=gogosakura-22" target="_blank" >Amazon</a></div></td><td style="vertical-align:bottom;padding-left:10px;font-size:x-small;border:none">by <a href="http://kaereba.com" rel="nofollow" target="_blank">カエレバ</a></td></tr></table></font></td></tr></table>

]]></content>
    </entry>
    
    <entry>
        <title type="html"><![CDATA[高須海浜公園]]></title>
        <link href="http://yoshitsugufujii.github.io/blog/2017/12/05/takasukaihinkouen/"/>
        <updated>2017-12-05T09:29:49+09:00</updated>
        <id>http://yoshitsugufujii.github.io/blog/2017/12/05/takasukaihinkouen</id>
        <content type="html"><![CDATA[<p>釣行日 2017年12月02日(土)<br/>
天気 晴<br/>
場所 高須海浜公園<br/>
釣行時間: 15:30 〜 16:15</p>

<p>ベビーが生まれる直前なので釣りは自粛かなぁ。<br/>
と、前から行ってみたいと思っていた高須海浜公園のことを思い出し、<br/>
妻に話すと短時間ならという話なので高須海浜公園に行ってみました。</p>

<!-- more -->


<p></p>

<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<p>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-7039502723411845"
     data-ad-slot="8206045005"></ins></p>

<script>  
     (adsbygoogle = window.adsbygoogle || []).push({});  
</script>


<p></p>

<p><a href="http://yoshitsugufujii.github.io/images/blog/20171205/IMG_3158.jpg" data-lightbox="takasukaihinkouen" data-title=""/><br/>
  <img src="http://yoshitsugufujii.github.io/images/blog/20171205/IMG_3158.jpg"><br/>
</a></p>

<p><a href="http://yoshitsugufujii.github.io/images/blog/20171205/IMG_3159.jpg" data-lightbox="takasukaihinkouen" data-title=""/><br/>
  <img src="http://yoshitsugufujii.github.io/images/blog/20171205/IMG_3159.jpg"><br/>
</a></p>

<p><a href="http://yoshitsugufujii.github.io/images/blog/20171205/IMG_3160.jpg" data-lightbox="takasukaihinkouen" data-title=""/><br/>
  <img src="http://yoshitsugufujii.github.io/images/blog/20171205/IMG_3160.jpg"><br/>
</a></p>

<p>遊具もあって開放感もありいい公園ですね。<br/>
遮るものがないので風がでると寒いかな。<br/>
実際この日も相当寒かった。</p>

<p><a href="http://yoshitsugufujii.github.io/images/blog/20171205/IMG_3157.jpg" data-lightbox="takasukaihinkouen" data-title=""/><br/>
  <img src="http://yoshitsugufujii.github.io/images/blog/20171205/IMG_3157.jpg"><br/>
</a></p>

<p>護岸の方だとバーベキューもできるようです。<br/>
釣りしながらバーベキューとか楽しそうですね。<br/>
ただあんまり釣れないらしいですが。</p>

<p>気になる釣り場です。</p>

<p><a href="http://yoshitsugufujii.github.io/images/blog/20171205/IMG_3161.jpg" data-lightbox="takasukaihinkouen" data-title=""/><br/>
  <img src="http://yoshitsugufujii.github.io/images/blog/20171205/IMG_3161.jpg"><br/>
</a></p>

<p><a href="http://yoshitsugufujii.github.io/images/blog/20171205/IMG_3162.jpg" data-lightbox="takasukaihinkouen" data-title=""/><br/>
  <img src="http://yoshitsugufujii.github.io/images/blog/20171205/IMG_3162.jpg"><br/>
</a></p>

<p><a href="http://yoshitsugufujii.github.io/images/blog/20171205/IMG_3164.jpg" data-lightbox="takasukaihinkouen" data-title=""/><br/>
  <img src="http://yoshitsugufujii.github.io/images/blog/20171205/IMG_3164.jpg"><br/>
</a></p>

<p><a href="http://yoshitsugufujii.github.io/images/blog/20171205/IMG_3166.jpg" data-lightbox="takasukaihinkouen" data-title=""/><br/>
  <img src="http://yoshitsugufujii.github.io/images/blog/20171205/IMG_3166.jpg"><br/>
</a></p>

<p><a href="http://yoshitsugufujii.github.io/images/blog/20171205/IMG_3167.jpg" data-lightbox="takasukaihinkouen" data-title=""/><br/>
  <img src="http://yoshitsugufujii.github.io/images/blog/20171205/IMG_3167.jpg"><br/>
</a></p>

<p>手前にあるテトラが邪魔そうですね。<br/>
竿が長くないと厳しいです。</p>

<p>テトラからは遠浅の砂地が続いているらしいです。<br/>
数少ない釣り人(3人)はみんなサヨリ仕掛けです。</p>

<p>私もためしに投げてみました。</p>

<p><a href="http://yoshitsugufujii.github.io/images/blog/20171205/IMG_3170.jpg" data-lightbox="takasukaihinkouen" data-title=""/><br/>
  <img src="http://yoshitsugufujii.github.io/images/blog/20171205/IMG_3170.jpg"><br/>
</a></p>

<p>カレイ仕掛けをぶっこみ。サヨリ狙いです。</p>

<p>全然釣れない&hellip;と思いきや隣で釣っていたおじさんがデカめのサヨリを釣りました。<br/>
おおっと思うが続かず。</p>

<p>結果坊主でした。</p>

<p>早く帰ろうよという犬たち。</p>

<p><a href="http://yoshitsugufujii.github.io/images/blog/20171205/IMG_3168.jpg" data-lightbox="takasukaihinkouen" data-title=""/><br/>
  <img src="http://yoshitsugufujii.github.io/images/blog/20171205/IMG_3168.jpg"><br/>
</a></p>

<p>サヨリの季節かここしか来れない時にまた来よう。</p>

<p>そして投げ竿のリール。<br/>
放置してたら年少から年長さんぐらいの子供たち7、８人くらいに勝手にリールをまかれて<br/>
PEラインがぐちゃぐちゃになってしまいましたorz</p>
]]></content>
    </entry>
    
    <entry>
        <title type="html"><![CDATA[市川->検見川浜突堤]]></title>
        <link href="http://yoshitsugufujii.github.io/blog/2017/11/25/ichikawa-kemigawahama/"/>
        <updated>2017-11-25T23:16:06+09:00</updated>
        <id>http://yoshitsugufujii.github.io/blog/2017/11/25/ichikawa-kemigawahama</id>
        <content type="html"><![CDATA[<p>釣行日 2017年11月25日(土)<br/>
天気 晴<br/>
場所 市川<br/>
釣行時間: 9:00 〜 11:00</p>

<p>釣行日 2017年11月25日(土)<br/>
天気 晴<br/>
場所 検見川浜突堤<br/>
釣行時間: 15:30 〜 17:00</p>

<!-- more -->


<p></p>

<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<p>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-7039502723411845"
     data-ad-slot="8206045005"></ins></p>

<script>  
     (adsbygoogle = window.adsbygoogle || []).push({});  
</script>


<p></p>

<p>クーラーボックスにつけるロッドホルダーと竿受けを買いました。</p>

<p><a href="http://yoshitsugufujii.github.io/images/blog/20171125/IMG_3088.jpg" data-lightbox="ichikawa_kemigawa" data-title=""/><br/>
  <img src="http://yoshitsugufujii.github.io/images/blog/20171125/IMG_3088.jpg" style="width: 80%;"><br/>
</a></p>

<p><a href="http://yoshitsugufujii.github.io/images/blog/20171125/IMG_3089.jpg" data-lightbox="ichikawa_kemigawa" data-title=""/><br/>
  <img src="http://yoshitsugufujii.github.io/images/blog/20171125/IMG_3089.jpg" style="width: 80%;"><br/>
</a></p>

<p><a href="http://yoshitsugufujii.github.io/images/blog/20171125/IMG_3092.jpg" data-lightbox="ichikawa_kemigawa" data-title=""/><br/>
  <img src="http://yoshitsugufujii.github.io/images/blog/20171125/IMG_3092.jpg" style="width: 80%;"><br/>
</a></p>

<p>風がなければ小さいクーラーボックスに投げ竿かけても倒れませんでした。</p>

<p><a href="http://yoshitsugufujii.github.io/images/blog/20171125/IMG_3093.jpg" data-lightbox="ichikawa_kemigawa" data-title=""/><br/>
  <img src="http://yoshitsugufujii.github.io/images/blog/20171125/IMG_3093.jpg" style="width: 80%;"><br/>
</a></p>

<p>こりゃ便利だ！</p>

<table  border="0" cellpadding="5" style="border:none"><tr><td valign="top" style="border:none"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/B008AQMEJ6/gogosakura-22/" target="_blank" ><img src="https://images-fe.ssl-images-amazon.com/images/I/31fr9cNZrQL._SL160_.jpg" border="0" style="margin-right:10px" /></a></td><td valign="top" style="border:none;text-align:left"><div class="kaerebalink-name" style="margin-bottom:10px;line-height:120%"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/B008AQMEJ6/gogosakura-22/" target="_blank" >ダイワ(Daiwa) CPキーパー ホワイト</a></div><div class="kaerebalink-detail" style="margin-bottom:5px;"> ダイワ(Daiwa) </div><div class="kaerebalink-salesranking" style="margin-bottom:5px">売り上げランキング : 3900</div><table style="border:none;margin-top:10px"><tr><td style="border:none;text-align:left;"><div class="shoplinkamazon" style="margin-right:5px"><a href="http://www.amazon.co.jp/gp/search?keywords=%E3%83%80%E3%82%A4%E3%83%AF%20CP%E3%82%AD%E3%83%BC%E3%83%91%E3%83%BC&__mk_ja_JP=%E3%82%AB%E3%82%BF%E3%82%AB%E3%83%8A&tag=gogosakura-22" target="_blank" >Amazon</a></div><div class="shoplinkrakuten" style="margin-right:5px"><a href="https://hb.afl.rakuten.co.jp/hgc/16102ad8.0804351d.16102ad9.09702e1c/?pc=http%3A%2F%2Fsearch.rakuten.co.jp%2Fsearch%2Fmall%2F%25E3%2583%2580%25E3%2582%25A4%25E3%2583%25AF%2520CP%25E3%2582%25AD%25E3%2583%25BC%25E3%2583%2591%25E3%2583%25BC%2F-%2Ff.1-p.1-s.1-sf.0-st.A-v.2%3Fx%3D0%26scid%3Daf_ich_link_urltxt%26m%3Dhttp%3A%2F%2Fm.rakuten.co.jp%2F" target="_blank" >楽天市場</a></div></td><td style="vertical-align:bottom;padding-left:10px;font-size:x-small;border:none">by <a href="http://kaereba.com" rel="nofollow" target="_blank">カエレバ</a></td></tr></table></font></td></tr></table>


<p></p>

<table  border="0" cellpadding="5" style="border:none"><tr><td valign="top" style="border:none"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/B00EVBBKEY/gogosakura-22/" target="_blank" ><img src="https://images-fe.ssl-images-amazon.com/images/I/317TnxvqPML._SL160_.jpg" border="0" style="margin-right:10px" /></a></td><td valign="top" style="border:none;text-align:left"><div class="kaerebalink-name" style="margin-bottom:10px;line-height:120%"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/B00EVBBKEY/gogosakura-22/" target="_blank" >ダイワ(Daiwa) ロッドホルダー CPスタンド W レッド 925938</a></div><div class="kaerebalink-detail" style="margin-bottom:5px;"> ダイワ(Daiwa) 2013-09-24</div><table style="border:none;margin-top:10px"><tr><td style="border:none;text-align:left;"><div class="shoplinkamazon" style="margin-right:5px"><a href="http://www.amazon.co.jp/gp/search?keywords=%E3%83%80%E3%82%A4%E3%83%AF%20CP%E3%82%B9%E3%82%BF%E3%83%B3%E3%83%89&__mk_ja_JP=%E3%82%AB%E3%82%BF%E3%82%AB%E3%83%8A&tag=gogosakura-22" target="_blank" >Amazon</a></div><div class="shoplinkrakuten" style="margin-right:5px"><a href="https://hb.afl.rakuten.co.jp/hgc/16102ad8.0804351d.16102ad9.09702e1c/?pc=http%3A%2F%2Fsearch.rakuten.co.jp%2Fsearch%2Fmall%2F%25E3%2583%2580%25E3%2582%25A4%25E3%2583%25AF%2520CP%25E3%2582%25B9%25E3%2582%25BF%25E3%2583%25B3%25E3%2583%2589%2F-%2Ff.1-p.1-s.1-sf.0-st.A-v.2%3Fx%3D0%26scid%3Daf_ich_link_urltxt%26m%3Dhttp%3A%2F%2Fm.rakuten.co.jp%2F" target="_blank" >楽天市場</a></div></td><td style="vertical-align:bottom;padding-left:10px;font-size:x-small;border:none">by <a href="http://kaereba.com" rel="nofollow" target="_blank">カエレバ</a></td></tr></table></font></td></tr></table>


<p></p>

<p>本日の娘スイミングプール待ち時間はカレイ狙いです。</p>

<p><a href="http://yoshitsugufujii.github.io/images/blog/20171125/IMG_3096.jpg" data-lightbox="ichikawa_kemigawa" data-title=""/><br/>
  <img src="http://yoshitsugufujii.github.io/images/blog/20171125/IMG_3096.jpg" style="width: 80%;"><br/>
</a></p>

<p>サヨリはもう誰も狙ってませんね。<br/>
おじさまがたが10本ぐらい竿出しています。<br/>
私も唯一持っている投げ竿を出してやってみましたが坊主。</p>

<p>誰も連れてませんでした。</p>

<p>15時半からは検見川浜突堤で投げ竿を一本ぶっ込んでトリック。<br/>
相変わらずの混雑っぷり。</p>

<p><a href="http://yoshitsugufujii.github.io/images/blog/20171125/IMG_3097.jpg" data-lightbox="ichikawa_kemigawa" data-title=""/><br/>
  <img src="http://yoshitsugufujii.github.io/images/blog/20171125/IMG_3097.jpg" style="width: 80%;"><br/>
</a></p>

<p>まだイナダ狙っている人がいます。<br/>
サヨリやってる人もいました。<br/>
あとはヒイカ狙いとサビキですかね。</p>

<p>しばらくやるもあたりなく。<br/>
夕まずめにイワシの大群が海面を泳ぐも3匹ゲットのみ。<br/>
10センチにも満たない群れだったのでちょっと針が大きすぎました。</p>

<p>暗くなると隣の人が発電機回して灯り照らしてましたが魚かかなり寄ってました。</p>

<p>いいですね。集魚灯欲しいな。</p>
]]></content>
    </entry>
    
    <entry>
        <title type="html"><![CDATA[平塚新港 ヒイラギ サッパ コノシロ イナッコ]]></title>
        <link href="http://yoshitsugufujii.github.io/blog/2017/11/24/hiratsuka/"/>
        <updated>2017-11-24T17:23:41+09:00</updated>
        <id>http://yoshitsugufujii.github.io/blog/2017/11/24/hiratsuka</id>
        <content type="html"><![CDATA[<p>釣行日 2017年11月23日(木)<br/>
天気 晴れ時々曇<br/>
場所 平塚新港<br/>
釣行時間: 14:00 〜 16:30</p>

<p>久しぶりの釣りです。<br/>
実家に帰ってきたので平塚新港。</p>

<p>夏に比べてだいぶ人が少ないです。<br/>
夏の3分の1もいないんじゃないでしょうか。</p>

<!-- more -->


<p></p>

<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<p>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-7039502723411845"
     data-ad-slot="8206045005"></ins></p>

<script>  
     (adsbygoogle = window.adsbygoogle || []).push({});  
</script>


<p></p>

<p>今日もトリックサビキです。</p>

<p>開始直後からヒイラギの猛攻です。</p>

<p><a href="http://yoshitsugufujii.github.io/images/blog/20171124/IMG_3071.jpg" data-lightbox="hiratuka" data-title=""/><br/>
  <img src="http://yoshitsugufujii.github.io/images/blog/20171124/IMG_3071.jpg" style="width: 80%;"><br/>
</a></p>

<p>３連がけ</p>

<p>終了までに15匹ぐらい釣りました。<br/>
オールリリース。<br/>
調べてみると唐揚げにすると美味しいようで。<br/>
持って帰れば良かったかな。</p>

<p>途中様子をみにきた鳥くんにあげます。</p>

<p><a href="http://yoshitsugufujii.github.io/images/blog/20171124/IMG_3077.jpg" data-lightbox="hiratuka" data-title=""/><br/>
  <img src="http://yoshitsugufujii.github.io/images/blog/20171124/IMG_3077.jpg" style="width: 80%;"><br/>
</a></p>

<p>口にくわえて離れて行きましたが地面に置いてどこかに行ってしまいました。<br/>
お口に合わなかったようです(^_^;)</p>

<p>ヒイラギの他には浅い棚でサッパ（一瞬アジかと思った）とコノシロが連れました。</p>

<p><a href="http://yoshitsugufujii.github.io/images/blog/20171124/IMG_3073.jpg" data-lightbox="hiratuka" data-title=""/><br/>
  <img src="http://yoshitsugufujii.github.io/images/blog/20171124/IMG_3073.jpg" style="width: 80%;"><br/>
</a></p>

<p><a href="http://yoshitsugufujii.github.io/images/blog/20171124/IMG_3074.jpg" data-lightbox="hiratuka" data-title=""/><br/>
  <img src="http://yoshitsugufujii.github.io/images/blog/20171124/IMG_3074.jpg" style="width: 80%;"><br/>
</a></p>

<p>そしてまたサッパかコノシロかなと思ったらボラ。</p>

<p><a href="http://yoshitsugufujii.github.io/images/blog/20171124/IMG_3080.jpg" data-lightbox="hiratuka" data-title=""/><br/>
  <img src="http://yoshitsugufujii.github.io/images/blog/20171124/IMG_3080.jpg" style="width: 80%;"><br/>
</a></p>

<p>16時半にはトラックのおじさんに追い出され、雨も降ってきたので納竿です。</p>

<p><a href="http://yoshitsugufujii.github.io/images/blog/20171124/IMG_3084.png" data-lightbox="hiratuka" data-title=""/><br/>
  <img src="http://yoshitsugufujii.github.io/images/blog/20171124/IMG_3084.png" style="width: 80%;"><br/>
</a></p>

<p>釣れたサッパとコノシロはママカリにしたいと思います。</p>
]]></content>
    </entry>
    
    <entry>
        <title type="html"><![CDATA[中級エンジニアになるためには]]></title>
        <link href="http://yoshitsugufujii.github.io/blog/2017/11/15/chuken-poem/"/>
        <updated>2017-11-15T10:30:40+09:00</updated>
        <id>http://yoshitsugufujii.github.io/blog/2017/11/15/chuken-poem</id>
        <content type="html"><![CDATA[<p>中堅エンジニア(多分)の藤井です。</p>

<p>今回はIT業界のエモい話。</p>

<!-- more -->


<p></p>

<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<p>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-7039502723411845"
     data-ad-slot="8206045005"></ins></p>

<script>  
     (adsbygoogle = window.adsbygoogle || []).push({});  
</script>


<p></p>

<p>長いこと初級エンジニアをやっていたような気がします。</p>

<p>業界の経験年数は自動的に積まれていきましたが新人の時代から一人で作ることが多く、我流でやっていることが多かったため相対的に自己の判断ができなかったからだったと思います。</p>

<p>なので5年くらいたってもフワフワとした気持ちでしたし、まだ新人、まだ初心者なのだと思っていました。</p>

<p>と同時に客先常駐のSIerだったために周りに実はしょぼいことがバレないかいつもビクビクしていたような気がします。</p>

<p>SIerをやめて転職したwebの自社サービスの会社ではチームの中で動くことを覚え、またリーダーという役割を与えられて人に教えるという立場にもなりました。</p>

<p>それでも私よりもすごい人はたくさんいましたし、新人ではないにしろ、「うーん。初級は&hellip;脱したよね？人に教えてるし」というモヤモヤとした感じでした。</p>

<p>その後私にはリーダーには向いていなかったらしく、色々と迷惑をかけた上にやめて受託のweb製作会社に入りました。</p>

<p>そこでオフショアの方達と働く機会があったんですがその人たちのコードは飛び抜けているわけではないにしろ整然としていてとても綺麗にかかれていました。</p>

<p>そしてそのオフショアのリーダークラスの人のコードをみて初めてこう思いました。</p>

<p>「かっこいいなこの（人の）コード。」</p>

<p>綺麗に書いているなと思うことは何度もありました。こうやって書くんだなとか、うまくトンチをきかせてるかコードだな（だいたい汚いけど）とか、そういったコードもたくさん見てきました。</p>

<p>ただかっこいいなと思ったのはその時がはじめてのような気がします。</p>

<p>そして見た瞬間、「ああ、自分は初級から抜け出たのだな。」と思いました。</p>

<p>綺麗だなとか上手いこと書いているなというのは新人でも感じられます。</p>

<p>ただかっこいいなと感じるのは新人では無理ではないでしょうか。</p>

<p>それは過去の様々な経験、自分なりの流儀や見やすく心地よい書き方や設計方法が自分の中で蓄積されて熟成し、コピペではない自分のコードを書けるようになった人。<br/>
そういった人が持つフィルター。自分の世界観が出来て初めて思えるものではないしょうか。</p>

<p>そうやって作り上げた世界観が他の人が作った世界観(あるコード)に触れた時に綺麗だなとかうまくとか思うのではなくかっこいいなと思うのではないでしょうか。</p>

<p>なので新人エンジニアに聞かれたらこう答えます。</p>

<p>他人のソースを見てかっこいいと思えるようになりなさい。</p>
]]></content>
    </entry>
    
    <entry>
        <title type="html"><![CDATA[ロッドホルダーをDIY]]></title>
        <link href="http://yoshitsugufujii.github.io/blog/2017/11/12/rod-holder/"/>
        <updated>2017-11-12T18:23:08+09:00</updated>
        <id>http://yoshitsugufujii.github.io/blog/2017/11/12/rod-holder</id>
        <content type="html"><![CDATA[<p>娘が39.5分の熱が出てしまい、週末の予定全てキャンセルです。<br/>
釣りにいけない。どうしようかと思案の末。<br/>
前にスケートボードとサーフボードの棚をDIYしたことがありまして。<br/>
その時に残った木材があったのでロッドホルダー作りに図工2の私が挑戦です。</p>

<!-- more -->


<p></p>

<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<p>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-7039502723411845"
     data-ad-slot="8206045005"></ins></p>

<script>  
     (adsbygoogle = window.adsbygoogle || []).push({});  
</script>


<p></p>

<p>２年前に作成したスケートボードホルダー<br/>
<a href="http://yoshitsugufujii.github.io/images/blog/20171112/IMG_3571.jpg" data-lightbox="rod-holder" data-title=""/><br/>
  <img src="http://yoshitsugufujii.github.io/images/blog/20171112/IMG_3571.jpg" style="width: 80%;"><br/>
</a></p>

<p>２年前に作成したサーフボードホルダー<br/>
<a href="http://yoshitsugufujii.github.io/images/blog/20171112/IMG_0446.jpg" data-lightbox="rod-holder" data-title=""/><br/>
  <img src="http://yoshitsugufujii.github.io/images/blog/20171112/IMG_0446.jpg" style="width: 80%;"><br/>
</a></p>

<p><a href="http://yoshitsugufujii.github.io/images/blog/20171112/IMG_0447.jpg" data-lightbox="rod-holder" data-title=""/><br/>
  <img src="http://yoshitsugufujii.github.io/images/blog/20171112/IMG_0447.jpg" style="width: 80%;"><br/>
</a></p>

<p>そして余った木材。</p>

<p><a href="http://yoshitsugufujii.github.io/images/blog/20171112/IMG_2889.jpg" data-lightbox="rod-holder" data-title=""/><br/>
  <img src="http://yoshitsugufujii.github.io/images/blog/20171112/IMG_2889.jpg" style="width: 80%;"><br/>
</a></p>

<p>前回はメルカリに出品されている自作のホルダーを参考にしたので完成予想図がありましたが、今回はないです。<br/>
インパクトと折りたたみノコギリだけで3時間ぐらいかかって完成。<br/>
最初にまったく考えずに作り始めたのが敗因でした。</p>

<p><a href="http://yoshitsugufujii.github.io/images/blog/20171112/IMG_2895.jpg" data-lightbox="rod-holder" data-title=""/><br/>
  <img src="http://yoshitsugufujii.github.io/images/blog/20171112/IMG_2895.jpg" style="width: 80%;"><br/>
</a></p>

<p>まぁ機能は満たしているかな。</p>

<p><a href="http://yoshitsugufujii.github.io/images/blog/20171112/rod-holder.png" data-lightbox="rod-holder" data-title=""/><br/>
  <img src="http://yoshitsugufujii.github.io/images/blog/20171112/rod-holder.png" style="width: 80%;"><br/>
</a></p>

<p>塗り終わったらニスとハケは匂いがやばいのでジップロックにいれるといいです。</p>

<p><a href="http://yoshitsugufujii.github.io/images/blog/20171112/IMG_2905.jpg" data-lightbox="rod-holder" data-title=""/><br/>
  <img src="http://yoshitsugufujii.github.io/images/blog/20171112/IMG_2905.jpg" style="width: 80%;"><br/>
</a></p>

<p>夜になってうまれてはじめて自分でリールにラインを巻いてみました。</p>

<p><a href="http://yoshitsugufujii.github.io/images/blog/20171112/IMG_2902.jpg" data-lightbox="rod-holder" data-title=""/><br/>
  <img src="http://yoshitsugufujii.github.io/images/blog/20171112/IMG_2902.jpg" style="width: 80%;"><br/>
</a></p>

<p>スプールの上の方にばっかり片寄ってしまうのは何故なのか。</p>

<p>来週こそは釣りに行きたい。</p>
]]></content>
    </entry>
    
    <entry>
        <title type="html"><![CDATA[釣り場ポイントでタグをつけました]]></title>
        <link href="http://yoshitsugufujii.github.io/blog/2017/11/08/taged-point/"/>
        <updated>2017-11-08T12:14:55+09:00</updated>
        <id>http://yoshitsugufujii.github.io/blog/2017/11/08/taged-point</id>
        <content type="html"><![CDATA[<p>見ていただいている方ありがとうございます。<br/>
私はど素人ですがですが釣りはいつどこで何が釣れているのかの情報が大事だと思ってます。<br/>
そのため千葉で釣りをされている方のブログをよく見るようにしています。</p>

<p>その中で自分の釣行をネットに公開することで私も誰かの情報の助けになればいいと思っています。</p>

<!-- more -->


<p></p>

<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<p>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-7039502723411845"
     data-ad-slot="8206045005"></ins></p>

<script>  
     (adsbygoogle = window.adsbygoogle || []).push({});  
</script>


<p></p>

<p>場所ごとにカテゴリタグをつけました。<br/>
ポイントで過去の釣行をお読みになりたい方はこちらから過去記事を見ると便利です。</p>

<p><a href="http://yoshitsugufujii.github.io/images/blog/20171108/tag.png" data-lightbox="tag" data-title=""/>  <br/>
  <img src="http://yoshitsugufujii.github.io/images/blog/20171108/tag.png" style="width: 80%;">  <br/>
</a></p>

<p>週末は実家帰るので平塚新港に行こうと思います。</p>
]]></content>
    </entry>
    
    <entry>
        <title type="html"><![CDATA[富津新港 アジ ウミタナゴ]]></title>
        <link href="http://yoshitsugufujii.github.io/blog/2017/11/07/futtushinko/"/>
        <updated>2017-11-07T11:00:23+09:00</updated>
        <id>http://yoshitsugufujii.github.io/blog/2017/11/07/futtushinko</id>
        <content type="html"><![CDATA[<p>釣行日 2017年11月06日(日)<br/>
天気 曇<br/>
場所 富津新港<br/>
釣行時間: 13:30 〜 17:00</p>

<p>久しぶりに富津新港に来ました。</p>

<!-- more -->


<p></p>

<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<p>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-7039502723411845"
     data-ad-slot="8206045005"></ins></p>

<script>  
     (adsbygoogle = window.adsbygoogle || []).push({});  
</script>


<p></p>

<p><a href="http://yoshitsugufujii.github.io/images/blog/20171106/IMG_2824.jpg" data-lightbox="futtushinko" data-title=""/><br/>
  <img src="http://yoshitsugufujii.github.io/images/blog/20171106/IMG_2824.jpg" style="width: 80%;"><br/>
</a></p>

<p>釣り場なかなかパンパンですね。<br/>
空いた隙間があったので入ります。</p>

<p>準備していたら隣のルアーマンと私の間に男２の子供1(5歳くらい)のグループがはいってきました。<br/>
かなり狭いところに入ってくるなぁという思っていたらルアーマンのお兄さんおいおいという顔で見てました。</p>

<p>まぁ足元かなと思っていたら投げサビキはじめました。</p>

<p>う、うん。まぁうちらは足元狙うかなとトリック２本用意。<br/>
中層と底にセッティング。<br/>
ちなみに何回かルアーマンの若いお兄さんとお祭りしてました。</p>

<p>準備終わると娘が「私の竿はー？」って聞いて来るのでプロマリンサビキDXを用意。<br/>
仕掛け選ばせるとトリックがいいというのでまさかのトリック３本しがけです。</p>

<p>コマセまくと10センチに満たないぐらいの魚影がなにやらうようよとうごめいています。</p>

<p>中層にセットした竿が反応して開始30分ぐらいでウミタナゴちゃん</p>

<p><a href="http://yoshitsugufujii.github.io/images/blog/20171106/IMG_2828.jpg" data-lightbox="futtushinko" data-title=""/><br/>
  <img src="http://yoshitsugufujii.github.io/images/blog/20171106/IMG_2828.jpg" style="width: 80%;"><br/>
</a></p>

<p>リリース。</p>

<p>さらに30分後にまたウミタナゴ。</p>

<p><a href="http://yoshitsugufujii.github.io/images/blog/20171106/IMG_2835.jpg" data-lightbox="futtushinko" data-title=""/><br/>
  <img src="http://yoshitsugufujii.github.io/images/blog/20171106/IMG_2835.jpg" style="width: 80%;"><br/>
</a></p>

<p>この日の海面は竹のゴミがたくさん浮かんでいてラインがひっかかったりします。</p>

<p><a href="http://yoshitsugufujii.github.io/images/blog/20171106/IMG_2833.jpg" data-lightbox="futtushinko" data-title=""/><br/>
  <img src="http://yoshitsugufujii.github.io/images/blog/20171106/IMG_2833.jpg" style="width: 80%;"><br/>
</a></p>

<p>トリックはまだいいですがまいてくる投げサビキとかラインにからまったりして大変そうでした。</p>

<p>15時ぐらいにちょっと離れたところでアジ釣れたなって思っていたらこちらにもあたりが。<br/>
20センチぐらいのアジ。</p>

<p><a href="http://yoshitsugufujii.github.io/images/blog/20171106/IMG_2846.png" data-lightbox="futtushinko" data-title=""/><br/>
  <img src="http://yoshitsugufujii.github.io/images/blog/20171106/IMG_2846.png" style="width: 80%;"><br/>
</a></p>

<p>それからしばらくしてまたウミタナゴ。</p>

<p><a href="http://yoshitsugufujii.github.io/images/blog/20171106/IMG_2836.jpg" data-lightbox="futtushinko" data-title=""/><br/>
  <img src="http://yoshitsugufujii.github.io/images/blog/20171106/IMG_2836.jpg" style="width: 80%;"><br/>
</a></p>

<p>17時すぎてもう暗くなって来たので納竿。<br/>
ほんと日がくれるのがはやくなりました。</p>

<p>前来た時もそうでしたが夕まずめは投げサビキの方が釣れてました。<br/>
そして圧倒的に白スキンのサビキでした。</p>

<p>今度行くことがあったら持って行ってみよう。</p>

<p>隣の家族はアジの他にもサバを釣ってました。</p>

<p>片付けている最中にルアーマンのお兄さんの竿がぐぐーっとしなる。
なんだなんだと思っていたらタチウオがあがりました。<br/>
釣り場がちょっとどよめきましたw<br/>
ZZヘッドにマナティ 90のパールホワイトで底で釣ったみたいです。<br/>
暗くなるけど暗くなりきらないくらいの時間です。</p>

<p>ああいうのを釣って見たいです。</p>

<p>アジは結構身がつまっていていい感じ。<br/>
<a href="http://yoshitsugufujii.github.io/images/blog/20171106/IMG_2843.jpg" data-lightbox="futtushinko" data-title=""/><br/>
  <img src="http://yoshitsugufujii.github.io/images/blog/20171106/IMG_2843.jpg" style="width: 80%;"><br/>
</a></p>

<p>アジは三昧におろしてムニエルに。<br/>
翌日のお弁当のおかずとなりました。</p>

<p><a href="http://yoshitsugufujii.github.io/images/blog/20171106/IMG_2845.jpg" data-lightbox="futtushinko" data-title=""/><br/>
  <img src="http://yoshitsugufujii.github.io/images/blog/20171106/IMG_2845.jpg" style="width: 80%;"><br/>
</a></p>

<p>そういえば隣の迷惑な釣り人は子供(5歳くらい)に海にむかっておしっこさせててびっくりしました。<br/>
大陸系の方かと思いましたが日本人みたいでした。<br/>
本当にもう勘弁してほしいです。</p>
]]></content>
    </entry>
    
    <entry>
        <title type="html"><![CDATA[市川 サヨリ狙うもまたまたボウズ]]></title>
        <link href="http://yoshitsugufujii.github.io/blog/2017/11/06/ichikawa/"/>
        <updated>2017-11-06T11:15:50+09:00</updated>
        <id>http://yoshitsugufujii.github.io/blog/2017/11/06/ichikawa</id>
        <content type="html"><![CDATA[<p>釣行日 2017年11月04日(土)<br/>
天気 曇<br/>
場所 市川<br/>
釣行時間: 9:00 〜 10:30</p>

<p>こりずにサヨリ。<br/>
毎週釣れないのにやってもうこれは釣れるかどうかの調査ですね。</p>

<!-- more -->


<p></p>

<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<p>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-7039502723411845"
     data-ad-slot="8206045005"></ins></p>

<script>  
     (adsbygoogle = window.adsbygoogle || []).push({});  
</script>


<p></p>

<p><a href="http://yoshitsugufujii.github.io/images/blog/20171105/IMG_2818.jpg" data-lightbox="ichikawa" data-title=""/><br/>
  <img src="http://yoshitsugufujii.github.io/images/blog/20171105/IMG_2818.jpg" style="width: 80%;"><br/>
</a></p>

<p>川の濁りきえてます。<br/>
おお、これはいけるかもと思いますが。<br/>
結果あたりもなく終了。</p>

<p>先端の方では釣れてるみたいですね。<br/>
うーん。</p>

<p>ハゼは快調に釣れてました。</p>

<p>夕方は偵察がてら検見川浜に。
人いっぱいですね。</p>

<p><a href="http://yoshitsugufujii.github.io/images/blog/20171105/IMG_2820.jpg" data-lightbox="yottohabar" data-title=""/><br/>
  <img src="http://yoshitsugufujii.github.io/images/blog/20171105/IMG_2820.jpg" style="width: 80%;"><br/>
</a></p>

<p>竿出すも雨が降り出して風も強くなってきたので退散。</p>
]]></content>
    </entry>
    
    <entry>
        <title type="html"><![CDATA[今井岸壁 夜釣り]]></title>
        <link href="http://yoshitsugufujii.github.io/blog/2017/11/04/imaiganpeki/"/>
        <updated>2017-11-04T13:14:55+09:00</updated>
        <id>http://yoshitsugufujii.github.io/blog/2017/11/04/imaiganpeki</id>
        <content type="html"><![CDATA[<p>釣行日 2017年11月01日(木)<br/>
天気 雨<br/>
場所 今井岸壁<br/>
釣行時間: 23:30 〜 6:30</p>

<p>雨予報ですが次の日の午前中は予定あるので心おきなく釣りを楽しむために今井岸壁にきました。</p>

<!-- more -->


<p></p>

<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<p>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-7039502723411845"
     data-ad-slot="8206045005"></ins></p>

<script>  
     (adsbygoogle = window.adsbygoogle || []).push({});  
</script>


<p></p>

<p>夜釣りです。</p>

<p><a href="http://yoshitsugufujii.github.io/images/blog/20171104/IMG_2808.jpg" data-lightbox="imaiganpeki" data-title=""/><br/>
  <img src="http://yoshitsugufujii.github.io/images/blog/20171104/IMG_2808.jpg" style="width: 80%;"><br/>
</a></p>

<p>先週とおなじ今井岸壁です。</p>

<p>着いた時は小雨程度のふりでしたが、0時回ったくらいから強くなりはじめ風もでてきました。</p>

<p>雨が降っていましたが雲のお布団効果で先週と比べ大分寒さはだいぶマシですね。</p>

<p>車は釣り場全体で20台ほどですかね。釣り場は比較的空いてます。</p>

<p>二本の竿にサバの切り身と塩イソメをつけた二本針の仕掛けをぶっこんで、二本の竿でトリックスタイルです。</p>

<p>一本はトリックエースFR 5号をつけ、もう一本は改良トリック7 夜光 5号です。</p>

<table  border="0" cellpadding="5" style="border:none"><tr><td valign="top" style="border:none"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/B00GBTZMSE/gogosakura-22/" target="_blank" ><img src="https://images-fe.ssl-images-amazon.com/images/I/51CnU%2BA0Z8L._SL160_.jpg" border="0" style="margin-right:10px" /></a></td><td valign="top" style="border:none;text-align:left"><div class="kaerebalink-name" style="margin-bottom:10px;line-height:120%"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/B00GBTZMSE/gogosakura-22/" target="_blank" >Marufuji(マルフジ) P-562 トリックエースFR 5号</a></div><div class="kaerebalink-detail" style="margin-bottom:5px;"> Marufuji(マルフジ) 2013-10-29</div><div class="kaerebalink-salesranking" style="margin-bottom:5px">売り上げランキング : 99516</div><table style="border:none;margin-top:10px"><tr><td style="border:none;text-align:left;"><div class="shoplinkamazon" style="margin-right:5px"><a href="http://www.amazon.co.jp/gp/search?keywords=%E3%83%88%E3%83%AA%E3%83%83%E3%82%AF%E3%82%A8%E3%83%BC%E3%82%B9FR%205%E5%8F%B7&__mk_ja_JP=%E3%82%AB%E3%82%BF%E3%82%AB%E3%83%8A&tag=gogosakura-22" target="_blank" >Amazon</a></div><div class="shoplinkrakuten" style="margin-right:5px"><a href="https://hb.afl.rakuten.co.jp/hgc/16102ad8.0804351d.16102ad9.09702e1c/?pc=http%3A%2F%2Fsearch.rakuten.co.jp%2Fsearch%2Fmall%2F%25E3%2583%2588%25E3%2583%25AA%25E3%2583%2583%25E3%2582%25AF%25E3%2582%25A8%25E3%2583%25BC%25E3%2582%25B9FR%25205%25E5%258F%25B7%2F-%2Ff.1-p.1-s.1-sf.0-st.A-v.2%3Fx%3D0%26scid%3Daf_ich_link_urltxt%26m%3Dhttp%3A%2F%2Fm.rakuten.co.jp%2F" target="_blank" >楽天市場</a></div></td><td style="vertical-align:bottom;padding-left:10px;font-size:x-small;border:none">by <a href="http://kaereba.com" rel="nofollow" target="_blank">カエレバ</a></td></tr></table></font></td></tr></table>




<table  border="0" cellpadding="5" style="border:none"><tr><td valign="top" style="border:none"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/B00GBTZ16M/gogosakura-22/" target="_blank" ><img src="https://images-fe.ssl-images-amazon.com/images/I/616pfa0QyZL._SL160_.jpg" border="0" style="margin-right:10px" /></a></td><td valign="top" style="border:none;text-align:left"><div class="kaerebalink-name" style="margin-bottom:10px;line-height:120%"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/B00GBTZ16M/gogosakura-22/" target="_blank" >Marufuji(マルフジ) P-570 改良トリック7 夜光 5号</a></div><div class="kaerebalink-detail" style="margin-bottom:5px;"> Marufuji(マルフジ) 2013-10-29</div><table style="border:none;margin-top:10px"><tr><td style="border:none;text-align:left;"><div class="shoplinkamazon" style="margin-right:5px"><a href="http://www.amazon.co.jp/gp/search?keywords=%E3%83%88%E3%83%AA%E3%83%83%E3%82%AF7%20%E5%A4%9C%E5%85%89&__mk_ja_JP=%E3%82%AB%E3%82%BF%E3%82%AB%E3%83%8A&tag=gogosakura-22" target="_blank" >Amazon</a></div><div class="shoplinkrakuten" style="margin-right:5px"><a href="https://hb.afl.rakuten.co.jp/hgc/16102ad8.0804351d.16102ad9.09702e1c/?pc=http%3A%2F%2Fsearch.rakuten.co.jp%2Fsearch%2Fmall%2F%25E3%2583%2588%25E3%2583%25AA%25E3%2583%2583%25E3%2582%25AF7%2520%25E5%25A4%259C%25E5%2585%2589%2F-%2Ff.1-p.1-s.1-sf.0-st.A-v.2%3Fx%3D0%26scid%3Daf_ich_link_urltxt%26m%3Dhttp%3A%2F%2Fm.rakuten.co.jp%2F" target="_blank" >楽天市場</a></div></td><td style="vertical-align:bottom;padding-left:10px;font-size:x-small;border:none">by <a href="http://kaereba.com" rel="nofollow" target="_blank">カエレバ</a></td></tr></table></font></td></tr></table>


<p>1時回ったくらいからベイトサイズのイワシがポツポツと上がります。</p>

<p>小さすぎるのと風が強いのとであたりもわからず、たまにあげるとついている感じです。</p>

<p>不思議とかかるのはトリックエースFRのトリックのみ。</p>

<p>なにかヒラヒラがイワシを誘うんでしょうか。</p>

<p>2時半頃アジが釣れ出します。</p>

<p>眠さと雨と風と暗さで集中できず、強いあたりは数回あるも2匹のみ。</p>

<p>サイズ夜中だからいいサイズ。20センチぐらい。</p>

<p>3時くらいになってその後釣れなくなったので車で仮眠。</p>

<p>5時に起きますが風と雨は弱まる気配見せず。</p>

<p>5時半。先週と変わらなぬタイミングで時合突入。</p>

<p>トリック3本にして底まで落とし込んで釣ります。</p>

<p>6時ぐらいにアジは終了。</p>

<p>そこからは豆イワシが結構釣れました。</p>

<p>あげてみたら全部の針にイワシがついていることも。</p>

<p>6時半に納竿です。</p>

<p><a href="http://yoshitsugufujii.github.io/images/blog/20171104/IMG_2819.png" data-lightbox="imaiganpeki" data-title=""/><br/>
  <img src="http://yoshitsugufujii.github.io/images/blog/20171104/IMG_2819.png" style="width: 80%;"><br/>
</a></p>

<p><a href="http://yoshitsugufujii.github.io/images/blog/20171104/IMG_2811.jpg" data-lightbox="imaiganpeki" data-title=""/><br/>
  <img src="http://yoshitsugufujii.github.io/images/blog/20171104/IMG_2811.jpg" style="width: 80%;"><br/>
</a></p>

<p>アジとイワシは唐揚げにしていただきました。</p>

<p><a href="http://yoshitsugufujii.github.io/images/blog/20171104/IMG_2813.jpg" data-lightbox="imaiganpeki" data-title=""/><br/>
  <img src="http://yoshitsugufujii.github.io/images/blog/20171104/IMG_2813.jpg" style="width: 80%;"><br/>
</a></p>

<p>行く途中の道路の途中でこんな表示が。</p>

<p><a href="http://yoshitsugufujii.github.io/images/blog/20171104/IMG_2810.jpg" data-lightbox="imaiganpeki" data-title=""/><br/>
  <img src="http://yoshitsugufujii.github.io/images/blog/20171104/IMG_2810.jpg" style="width: 80%;"><br/>
</a></p>

<p>トランプさんのことですねー。</p>

<p>来日中は首都高使えないらしいですね<br/>
大変です。</p>

<p>午前中は今お世話になっている会社で社員同士の繋がりを強くするチームビルディング推進の取り組みで社員向けの炊き出しをやりました。</p>

<p><a href="http://yoshitsugufujii.github.io/images/blog/20171104/IMG_2803.jpg" data-lightbox="imaiganpeki" data-title=""/><br/>
  <img src="http://yoshitsugufujii.github.io/images/blog/20171104/IMG_2803.jpg" style="width: 80%;"><br/>
</a></p>

<p>バターチキンカレーとコールスローです。</p>

<p><a href="http://yoshitsugufujii.github.io/images/blog/20171104/IMG_2807.jpg" data-lightbox="imaiganpeki" data-title=""/><br/>
  <img src="http://yoshitsugufujii.github.io/images/blog/20171104/IMG_2807.jpg" style="width: 80%;"><br/>
</a></p>

<p>大山鳥を使い、お店かってレベルのものができました。<br/>
おいしかった。<br/>
レシピはこれ。<br/>
<a href="https://cookpad.com/recipe/4021261">バターチキンカレー</a><br/>
<a href="https://www.kewpie.co.jp/recipes/basic_sarada/sarada05.html">コールスロー</a></p>

<p>集魚灯欲しいなー。</p>
]]></content>
    </entry>
    
    <entry>
        <title type="html"><![CDATA[rails5でafter_commitが動かなくなってしまった]]></title>
        <link href="http://yoshitsugufujii.github.io/blog/2017/10/31/rails-after-commit/"/>
        <updated>2017-10-31T10:27:08+09:00</updated>
        <id>http://yoshitsugufujii.github.io/blog/2017/10/31/rails-after-commit</id>
        <content type="html"><![CDATA[<p>ITネタです。すいません。<br/>
railsのモデルデータに変更が加えられたらelasticsearchのデータをafter_commitで更新するようにしているのですが。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">after_commit</span> <span class="ss">:index_elasticsearch_document</span><span class="p">,</span> <span class="ss">on</span><span class="p">:</span> <span class="o">[</span><span class="ss">:create</span><span class="p">,</span> <span class="ss">:update</span><span class="o">]</span>
</span><span class='line'><span class="n">after_commit</span> <span class="ss">:delete_elasticsearch_document</span><span class="p">,</span> <span class="ss">on</span><span class="p">:</span> <span class="o">[</span><span class="ss">:destroy</span><span class="o">]</span>
</span></code></pre></td></tr></table></div></figure>


<p></p>

<p>Rails5.1.4にしたら設定したcallbackが走らなくなってしまいました。<br/>
困っている人結構いるような気がするんですがどうなんでしょうかね。</p>

<!-- more -->


<p></p>

<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<p>  <br/>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-7039502723411845"
     data-ad-slot="8206045005"></ins></p>

<script>  
     (adsbygoogle = window.adsbygoogle || []).push({});  
</script>


<p></p>

<p>onオプションをつけると動かなくて外すと動きます。<br/>
どうもcallbackが処理される過程の<a href="https://apidock.com/rails/v4.0.2/ActiveRecord/Transactions/transaction_include_any_action%3F">transaction_include_any_action?</a>によるどの操作(insert, update, destroy)での更新かとonオプションによる一致が正常に判定されず動かないようです。<br/>
ぐぐってみるとヒットするのはこのあたりでしょうか。</p>

<p><a href="https://github.com/rails/rails/issues/29554">after_create_commit and after_update_commit alias don&rsquo;t always run when next to each other #29554</a></p>

<p><a href="https://github.com/rails/rails/issues/29318">after_commit doesn&rsquo;t work with optimistic locking #29318</a></p>

<p>これのうち下のリンクが正解でした。<br/>
修正PRは<a href="https://github.com/rails/rails/pull/29096">これ</a>ですが、まだマージされてませんね。<br/>
この<a href="https://github.com/rails/rails/commit/371c083fb0620efebf7bd0188a66486403e12ecc">コミット</a>が原因のようです。
5.0.2ではうごくみたいですw</p>

<p>ちなみに関わっている案件の場合は正確にはcomposite_primary_keysを使っているのでcomposite_primary_keysの方の悲観的ロックが原因でした。<br/>
メソッドオーバーライドしているのでほぼ同じ現象です。</p>

<p><a href="https://github.com/composite-primary-keys/composite_primary_keys/blob/master/lib/composite_primary_keys/locking/optimistic.rb#L43">ここ</a>で<a href="https://github.com/rails/rails/pull/29096">PR</a>と同じように@_trigger_update_callbackを設定すれば治ります。</p>

<p>ただパッチをあてるのもなって感じなのでモデル側でこうなおしました。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">ElasticsearchNoModel</span> <span class="o">&lt;</span> <span class="no">ApplicationRecord</span>
</span><span class='line'>  <span class="k">def</span> <span class="nf">_update_record</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
</span><span class='line'>    <span class="n">affected_rows</span> <span class="o">=</span> <span class="k">super</span>
</span><span class='line'>    <span class="k">if</span> <span class="n">affected_rows</span> <span class="o">==</span> <span class="mi">1</span>
</span><span class='line'>      <span class="vi">@_trigger_update_callback</span> <span class="o">=</span> <span class="kp">true</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p></p>

<p>create時とupdate時はこれで治りましたがdestroyの時がこれだとまだうごきません。<br/>
ちなみに今関わっている案件ではparanoia使ってます。</p>

<p><a href="https://github.com/rubysherpas/paranoia/issues/418">after_commit with on: option doesn&rsquo;t work at Rails 5.1.3 #418</a></p>

<p>issueあがってますがリアクションありませんね。</p>

<p>ソース読んでこう直しました。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">ElasticsearchNoModel</span> <span class="o">&lt;</span> <span class="no">ApplicationRecord</span>
</span><span class='line'>  <span class="k">def</span> <span class="nf">destroy</span>
</span><span class='line'>    <span class="vi">@_trigger_destroy_callback</span> <span class="o">=</span> <span class="kp">true</span>
</span><span class='line'>    <span class="k">super</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p></p>

<p>@_trigger_destroy_callbackをsuperの前に設定するのはparanoiaのメソッドがdeleted_atの更新とrun_callbackを同一メソッドでやっているためです(なるべくパッチorメソッドをいじりたくないので先に設定してしまっています)</p>

<p>これで無事にafter_commitが動くようになりました。</p>
]]></content>
    </entry>
    
    <entry>
        <title type="html"><![CDATA[市川 サヨリ狙うもこりずにボウズ]]></title>
        <link href="http://yoshitsugufujii.github.io/blog/2017/10/30/ichikawa/"/>
        <updated>2017-10-30T08:26:08+09:00</updated>
        <id>http://yoshitsugufujii.github.io/blog/2017/10/30/ichikawa</id>
        <content type="html"><![CDATA[<p>釣行日 2017年10月28日(土)<br/>
天気 曇<br/>
場所 市川<br/>
釣行時間: 9:00 〜 11:00</p>

<p>ダメかなぁと思いつつも娘のプールの間こりずにサヨリ狙ってみます。</p>

<!-- more -->


<p></p>

<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<p>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-7039502723411845"
     data-ad-slot="8206045005"></ins></p>

<script>  
     (adsbygoogle = window.adsbygoogle || []).push({});  
</script>


<p></p>

<p><a href="http://yoshitsugufujii.github.io/images/blog/20171030/IMG_2737.jpg" data-lightbox="imaiganpeki" data-title=""/><br/>
  <img src="http://yoshitsugufujii.github.io/images/blog/20171030/IMG_2737.jpg" style="width: 80%;"><br/>
</a></p>

<p>すこし粘りましたが、全然ダメでした。<br/>
あたりもなし。濁りがまだありました。</p>

<p>サヨリ狙っていたおじちゃんと話しましたが水曜まで水門が空いていたらしくそのせいでダメなんだとか。<br/>
浦安の方で2本釣れたからこっちもそろそろかなーと思ったんだけどまだだねー。にごりが消えるまでは釣れないよ。<br/>
って言ってました。</p>

<p>また台風きているし渋い状況は続くんですかね。</p>

<p>隣の親子はイソメぶっこんでハゼ釣ってました。<br/>
ハゼはあんまり関係ないんでしょうかね。</p>

<p>日曜日は平塚に。上州屋 平塚店がつぶれるという衝撃のニュースを聞いたので言って見ます。<br/>
もしかしたら在庫一掃セールとかやってないかなという期待も込めて。</p>

<p><a href="http://yoshitsugufujii.github.io/images/blog/20171030/IMG_2739.jpg" data-lightbox="imaiganpeki" data-title=""/><br/>
  <img src="http://yoshitsugufujii.github.io/images/blog/20171030/IMG_2739.jpg" style="width: 80%;"><br/>
</a></p>

<p>店員さんに平塚新港どうですか？って聞いたら台風来る前まではイワシ回ってきていたけど台風きてからはあんまりよくないというお話でした。<br/>
そしてセールやってませんでしたw</p>

<p>実家に帰ったら実家猫が凶暴になってました。</p>

<p><a href="http://yoshitsugufujii.github.io/images/blog/20171030/IMG_2758.jpg" data-lightbox="imaiganpeki" data-title=""/><br/>
  <img src="http://yoshitsugufujii.github.io/images/blog/20171030/IMG_2758.jpg" style="width: 80%;"><br/>
</a></p>

<p><a href="http://yoshitsugufujii.github.io/images/blog/20171030/IMG_2757.jpg" data-lightbox="imaiganpeki" data-title=""/><br/>
  <img src="http://yoshitsugufujii.github.io/images/blog/20171030/IMG_2757.jpg" style="width: 80%;"><br/>
</a></p>

<p>日曜日は午前中釣りにいこうかと思ってましたが雨が思いの外強かったので心折れました。</p>
]]></content>
    </entry>
    
    <entry>
        <title type="html"><![CDATA[今井岸壁 アジ]]></title>
        <link href="http://yoshitsugufujii.github.io/blog/2017/10/29/imaiganpeki/"/>
        <updated>2017-10-29T12:12:36+09:00</updated>
        <id>http://yoshitsugufujii.github.io/blog/2017/10/29/imaiganpeki</id>
        <content type="html"><![CDATA[<p>釣行日 2017年10月27日(金)<br/>
天気 晴<br/>
場所 今井岸壁<br/>
釣行時間: 4:00 〜 6:15</p>

<p>あまりにも週末が雨だったり釣れなかったりなので我慢できなくなってスーパー早く寝てこっそりと起きて釣りです。<br/>
前回<a href="http://yoshitsugufujii.github.io/blog/2017/10/11/sodegaurakou-20171009/">袖ヶ浦港</a>と言ってましたが、今井岸壁という名前が正式にあるようなので今井岸壁にしてますが前回と同じ場所です。</p>

<p>金曜日は娘を保育園に送らなければならないので7時半までに帰ってこなければなりません。</p>

<!-- more -->


<p></p>

<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<p>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-7039502723411845"
     data-ad-slot="8206045005"></ins></p>

<script>  
     (adsbygoogle = window.adsbygoogle || []).push({});  
</script>


<p></p>

<p>到着してまだ暗かったのでアオイソメを房がけにしてぶっこみます。<br/>
それとトリックの仕掛けもセット。</p>

<p><a href="http://yoshitsugufujii.github.io/images/blog/20171029/IMG_2729.jpg" data-lightbox="imaiganpeki" data-title=""/><br/>
<img src="http://yoshitsugufujii.github.io/images/blog/20171029/IMG_2729.jpg" style="width: 80%;"><br/>
</a></p>

<p>寒いです。とにかく寒いです。</p>

<p>この日の日の出は5:45。</p>

<p>5:30になっても全然釣れず、あー釣れなかったなぁと撤収時間にもう近いので片付け始めると隣のおじさんが「釣れだしたよー。」<br/>
えっと思って見ると入れ食いです。片付けはじめていたトリックをまた出そうとすると痛恨の仕掛けがらみ。</p>

<p>ようやく投入するもアジ3匹釣ったところで時合終了。<br/>
6:00ぐらいでした。</p>

<p>隣のおじさんに「釣れた？」って聞かれますが「肝心のところで仕掛けからんじゃって&hellip;」と言ったら、「あー。よくあるよね。そういうもんだよ。」<br/>
と慰めてもらいました。隣のおじさんは30センチぐらいのカマスを釣ってました。<br/>
そのさらに隣のおじさんはアジ24匹釣ったらしいです。</p>

<p>そのあともポツポツとあがってましたが時間なので終了。</p>

<p>なんていうか寒さが辛過ぎたので次はちゃんと防寒着をもっていこう。</p>

<p><a href="http://yoshitsugufujii.github.io/images/blog/20171029/IMG_2732.png" data-lightbox="fly" data-title=""/><br/>
  <img src="http://yoshitsugufujii.github.io/images/blog/20171029/IMG_2732.png" style="width: 80%;"><br/>
</a></p>

<p>豆アジは頭ごと唐揚げに。<br/>
頭付きの方がおいしかったです。</p>

<p><a href="http://yoshitsugufujii.github.io/images/blog/20171029/IMG_2730.jpg" data-lightbox="aji" data-title=""/><br/>
<img src="http://yoshitsugufujii.github.io/images/blog/20171029/IMG_2730.jpg" style="width: 80%;"><br/>
</a></p>
]]></content>
    </entry>
    
    <entry>
        <title type="html"><![CDATA[特定のユーザに送られるメールを全てキャンセル]]></title>
        <link href="http://yoshitsugufujii.github.io/blog/2017/10/26/cancel-mail/"/>
        <updated>2017-10-26T11:36:00+09:00</updated>
        <id>http://yoshitsugufujii.github.io/blog/2017/10/26/cancel-mail</id>
        <content type="html"><![CDATA[<p>ナチュラムでジョイナス2000が2000円切っていたのでぽちり。<br/>
昨日届きましたがやっぱりちょっと安い感じがありました。<br/>
もう千円だしてアリビオ買えばよかったかも。</p>

<p>釣り記事の合間のITネタ。</p>

<!-- more -->


<p></p>

<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<p>  <br/>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-7039502723411845"
     data-ad-slot="8206045005"></ins></p>

<script>  
     (adsbygoogle = window.adsbygoogle || []).push({});  
</script>


<p></p>

<p>usersテーブルにlockフラグを持っているなどある条件によってメールを送信するしないをアプリ全体で制御する方法。<br/>
interceptorを使います。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="c1"># config/initializers/mail_interceptor.rb  </span>
</span><span class='line'>
</span><span class='line'><span class="no">ActionMailer</span><span class="o">::</span><span class="no">Base</span><span class="o">.</span><span class="n">register_interceptor</span><span class="p">(</span><span class="no">MailInterceptor</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="c1"># lib/mail_interceptor.rb  </span>
</span><span class='line'>
</span><span class='line'><span class="k">class</span> <span class="nc">MailInterceptor</span>
</span><span class='line'>  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">delivering_email</span><span class="p">(</span><span class="n">email</span><span class="p">)</span>
</span><span class='line'>    <span class="c1"># lock中のユーザーには送らない  </span>
</span><span class='line'>    <span class="n">user</span> <span class="o">=</span> <span class="no">User</span><span class="o">.</span><span class="n">find_by</span><span class="p">(</span><span class="ss">email</span><span class="p">:</span> <span class="n">email</span><span class="o">.</span><span class="n">to</span><span class="p">)</span>
</span><span class='line'>    <span class="k">if</span> <span class="n">user</span><span class="o">.</span><span class="n">lock_flag?</span>
</span><span class='line'>      <span class="n">email</span><span class="o">.</span><span class="n">perform_deliveries</span> <span class="o">=</span> <span class="kp">false</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p></p>

<p>perform_deliveriesにfalseを設定するとメールが送られなくなります。</p>
]]></content>
    </entry>
    
    <entry>
        <title type="html"><![CDATA[工房浦安 砂ズリ]]></title>
        <link href="http://yoshitsugufujii.github.io/blog/2017/10/24/koubo-urayasu-sunaduri/"/>
        <updated>2017-10-24T11:07:55+09:00</updated>
        <id>http://yoshitsugufujii.github.io/blog/2017/10/24/koubo-urayasu-sunaduri</id>
        <content type="html"><![CDATA[<p>昨日の日記で書いていた砂ずり。<br/>
土曜日に上州屋稲毛店、江戸川店とはしごするもなく。</p>

<p>日曜日に浦安店に行ったらさすが浦安。<br/>
ありました。</p>

<!-- more -->


<p></p>

<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<p>  <br/>
<ins class="adsbygoogle"  
     style="display:block; text-align:center;"  
     data-ad-layout="in-article"  
     data-ad-format="fluid"  
     data-ad-client="ca-pub-7039502723411845"  
     data-ad-slot="8206045005"></ins></p>

<script>    
     (adsbygoogle = window.adsbygoogle || []).push({});    
</script>


<p></p>

<p><a href="http://yoshitsugufujii.github.io/images/blog/20171024/IMG_2712.jpg" data-lightbox="sunaduri"" data-title=""/><br/>
  <img src="http://yoshitsugufujii.github.io/images/blog/20171024/IMG_2712.jpg" style="width: 80%;">      <br/>
</a></p>

<p>まだあるかは不明ですがあと20個ぐらい残ってました。<br/>
欲しい人はお早めに。</p>
]]></content>
    </entry>
    
</feed>
