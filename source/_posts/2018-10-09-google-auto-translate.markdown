---
layout: post
title: "chromeで勝手に文字が変わってしまう"
date: 2018-10-09 10:55:42 +0900
comments: true
categories: [chrome]
---

ユーザーからの問い合わせでプロフィール変更ができないという連絡がきました。  
ログをみるとプロフィールを登録するというボタンを押したはずなのに、プロファイルを登録するという文字で送られてきています。  
世にも奇妙なお話です。  
  
<!-- more -->  
  
ちなみにformではキャンセルとプロフィールを登録するのボタンが二つあり、  
Railsのcontrollerではsubmitした時のボタンの名称で登録 or キャンセルと分岐させています。  
  
```ruby  
if params[:commit] == 'プロフィールを登録する'  
  # 登録処理  
else  
  # render 編集画面  
end  
```  
  
上記のようなコードなのですが、なぜかsubmitしたボタンがプロファイルを登録するになっていて、常にキャンセル側のelseに流れてしまっている模様。  
  
色々と調べた結果google chromeの自動翻訳がonになっている場合に起こるようです。  
  
プロフィール → profile → プロファイル  
  
該当画面で日本語で表示されている状態で日本語に翻訳をすると再現しました。  
  
どうもhtmlタグのlangがen固定になっているのがいけなかったっぽい。  
  
```html  
<html lang="en">  
```  
  
jaにしたら日本語に翻訳をやってもプロファイルになりませんでした。  
  
多言語対応しているサイトなので現在表示している言語に応じてhtml langを切り替えるようにしました。  
